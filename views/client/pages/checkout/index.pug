extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
    .container.my-3
      .row
        .col-12
          +box-head("Đặt hàng")
      .row
        .col-12
          table.table.table-bordered
            thead
              tr
                th STT
                th Ảnh
                th Tên
                th Giá
                th Số lượng
                th Tổng tiền
            tbody
              if cartDetail && cartDetail.products && cartDetail.products.length > 0
                each item, index in cartDetail.products
                  tr
                    td #{index + 1}
                    td
                      img(
                        src=item.productInfo.thumbnail
                        alt=item.productInfo.title
                        width="80"
                      )
                    td #{item.productInfo.title}
                    td #{item.productInfo.priceNew}$
                    td #{item.quantity}
                    td #{item.totalPrice}$
              else
                tr
                  td(colspan="6" class="text-center") Giỏ hàng trống.

        if cartDetail && cartDetail.products && cartDetail.products.length > 0
          h3.text-end Tổng đơn hàng: #{cartDetail.totalPrice}$

    if cartDetail && cartDetail.products && cartDetail.products.length > 0
      .row 
        .col-12 
          .card.p-4.my-4
            form(
              action="/checkout/order"
              method="POST"
            )
              .mb-3
                label(for="fullName" class="form-label") Họ tên
                input#fullName.form-control(
                  type="text"
                  name="fullName"
                  required
                )
              .mb-3
                label(for="phone" class="form-label") Số điện thoại
                input#phone.form-control(
                  type="text"
                  name="phone"
                  required
                )
              .mb-3
                label(for="address" class="form-label") Địa chỉ
                input#address.form-control(
                  type="text"
                  name="address"
                  required
                )
              .mb-3
                button.btn.btn-success.w-100(type="submit") ĐẶT HÀNG
